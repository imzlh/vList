<!DOCTYPE html>
<html><head><title>压缩中</title><script>
/*Part of zip-stream.js*/
let keepAlive=()=>{keepAlive=(()=>{});var e=location.href.substr(0,location.href.lastIndexOf("/"))+"/ping",r=setInterval(()=>{sw?sw.postMessage("ping"):fetch(e).then(e=>e.text(!e.ok&&clearInterval(r)))},1e4)},messages=[];window.onmessage=(e=>messages.push(e));let sw=null,scope="";function registerWorker(){return navigator.serviceWorker.getRegistration("./").then(e=>e||navigator.serviceWorker.register("sw.min.js",{scope:"./"})).then(e=>{const r=e.installing||e.waiting;return scope=e.scope,(sw=e.active)||new Promise(a=>{r.addEventListener("statechange",fn=(()=>{"activated"===r.state&&(r.removeEventListener("statechange",fn),sw=e.active,a())}))})})}function onMessage(e){let{data:r,ports:a,origin:t}=e;if(!a||!a.length)throw new TypeError("NO messageChannel found");if("object"!=typeof r)throw new TypeError("NO object found");r.origin=t,r.referrer=r.referrer||document.referrer||t,r.streamSaverVersion=new URLSearchParams(location.search).get("version"),r.headers?new Headers(r.headers):console.warn("recommend to use `data.headers`"),r.pathname||(console.error("Require data.pathname."),r.pathname=Math.random().toString().slice(-6)+"/"+r.filename),r.pathname=r.pathname.replace(/^\/+/g,"");let n=t.replace(/(^\w+:|^)\/\//,"");if(r.url=new URL(`${scope+n}/${r.pathname}`).toString(),!r.url.startsWith(`${scope+n}/`))throw new TypeError("[StreamSaver] bad `data.pathname`");const s=r.readableStream?[a[0],r.readableStream]:[a[0]];return r.readableStream||r.transferringReadable||keepAlive(),sw.postMessage(r,s)}window.opener&&window.opener.postMessage("StreamSaver::loadedPopup","*"),navigator.serviceWorker&&registerWorker().then(()=>{console.log("Worker Thread created."),window.onmessage=onMessage,messages.forEach(window.onmessage)}),keepAlive();</script></head><body><p>压缩中，不要关闭此页</p></body></html>